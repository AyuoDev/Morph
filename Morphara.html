<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Morphara - Character Creator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" type="image/x-icon" href="images/morphara_icon.png">

<!-- Modern browsers -->
<link rel="icon" type="image/png" sizes="32x32" href="images/morphara_icon.png">

<!-- Mobile / PWA -->
<link rel="apple-touch-icon" href="images/morphara_icon.png">
  <link rel="stylesheet" href="css/style.css">

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.158.0/build/three.module.js"
    }
  }
  </script>
</head>

<body class="app">
 <!-- ================= AUTH OVERLAY ================= -->
<div id="auth-overlay" class="overlay hidden">

  <div class="overlay-backdrop"></div>

  <div class="overlay-panel auth-panel">

    <div class="overlay-header">
      <h2 id="auth-title">Create Account</h2>
      <button id="close-auth" class="icon-btn">‚úï</button>
    </div>

    <div class="auth-tabs">
      <button class="auth-tab active" data-auth="signup">Sign Up</button>
      <button class="auth-tab" data-auth="login">Login</button>
    </div>

    <div class="auth-content">

      <input type="email" id="auth-email" placeholder="Email" />
      <input type="password" id="auth-password" placeholder="Password" />

      <button id="auth-submit" class="auth-main-btn">
        Create Account
      </button>

      <div class="auth-divider">
        <span>OR</span>
      </div>

      <button id="github-auth" class="auth-oauth-btn">
        Continue with GitHub
      </button>

      <p id="auth-error" class="auth-error"></p>

    </div>
  </div>
</div>


<!-- ================= LAUNCH OVERLAY ================= -->
<div id="launch-overlay" class="launch-overlay">

  <div class="launch-panel">

    <button id="close-launch" class="launch-close">‚úï</button>

    <div class="launch-hero">
      <h1>üéâ First 1000 Users Get 1 FREE Export</h1>
      <p>Create an account today and receive 1 credit instantly.</p>
    </div>

    <div class="launch-content">

      <h2>Welcome to Morphara v0.1.1</h2>

      <p>
        Morphara is a browser-based character creation tool designed for game developers,
        indie creators, and artists who want fast, customizable, animation-ready characters.
      </p>

      <ul>
        <li>‚úî Multiple Base Meshes</li>
        <li>‚úî Clothing Customization</li>
        <li>‚úî Texture Painting</li>
        <li>‚úî Animation System</li>
        <li>‚úî GLB Export Ready</li>
              <li class="launch-feature-unavailable">‚úò FBX Export (Premium+)</li>
      </ul>

      <h3>üöÄ Roadmap</h3>
      <ul>
        <li>More Base Meshes</li>
        <li>Full Animator Editor</li>
        <li>Monster & Creature</li>
        <li>Advanced Animation Blending</li>
      </ul>

      <button class="launch-cta" id="launch-signup-btn">
        Sign Up Now
      </button>

    </div>

  </div>
</div>

  <!-- ================= TOP BAR ================= -->
<div id="top-panel">

  <!-- LEFT -->
  <div class="top-section top-left">
    <div class="app-brand app-brand-link" onclick="window.location.href='index.html'">
  <img src="images/morphara_icon.png" class="app-icon" />
  <div class="app-title">
    Morphara
    <span class="app-version">v0.1.1</span>
  </div>
</div>

    <button class="top-btn active" data-mode="base">Base Meshes</button>
    <button class="top-btn" data-mode="customize">Customize</button>
    <button class="top-btn" data-mode="clothes">Appearance</button>
    <button class="top-btn" data-mode="materials">Materials</button>
    <button class="top-btn" data-mode="animations">Animations</button>
    <button class="top-btn" data-mode="randomizer">Random</button>
  </div>

  <!-- RIGHT -->
  <div class="top-section top-right top-actions">
    <button class="top-btn" id="export-btn">Export</button>

    <button class="top-btn credits-btn" id="credits-btn">
      üíé <span class="credits-count" id="credits-count">0</span>
    </button>

    <button class="top-btn user-btn" id="user-btn">
      üë§
    </button>

    <!-- DROPDOWNS -->
    <div id="credits-menu" class="top-dropdown hidden">
      <button class="dropdown-item open-plans">MemberShips</button>
      <button class="dropdown-item open-credits">Buy Credits</button>
    </div>

    <div id="user-menu" class="top-dropdown hidden">
      <button class="dropdown-item">Sign Up</button>
      <button class="dropdown-item">Log In</button>
    </div>
  </div>

</div>


  <!-- ================= EXPORT MENU ================= -->

</div>


  <!-- ================= LEFT PANELS ================= -->

  <div id="basemesh-panel" class="panel basemesh-cards">
    <p class="panel-loading-text">Base mesh selection coming soon.</p>
  </div>

  <div id="blendshape-panel" class="panel">
    <!-- Blend shapes are injected by JS -->
  </div>

<div id="material-panel" class="panel">

  <div class="material-section">
    <label class="section-title">Material Target</label>
    <div id="material-targets"></div>
  </div>

  <div class="material-section">
    <label class="section-title">Base Color</label>
    <input type="color" id="baseColorPicker" value="#e0e0e0">
  </div>

  <div class="material-section">
    <label class="section-title">Texture Presets</label>
    <div id="texture-grid"></div>
  </div>

  <!-- NEW: Active Texture Selector -->
  <div class="material-section">
    <label class="section-title">Active Texture</label>
    <select id="active-texture-select" class="material-select">
      <option value="custom_1">Custom Texture 1</option>
    </select>
    <button id="create-new-texture-btn" class="create-texture-btn">
      + Create New Texture
    </button>
  </div>

  <!-- NEW: Texture Resolution Selector -->
  <div class="material-section">
    <label class="section-title">Texture Resolution</label>
    <select id="texture-resolution-select" class="material-select">
      <option value="1024">1024x1024 (Free)</option>
      <option value="2048" disabled>2048x2048 (Premium)</option>
      <option value="4096" disabled>4096x4096 (Studio)</option>
    </select>
    <p id="resolution-upgrade-hint">
      Upgrade to Premium/Studio for higher resolutions
    </p>
  </div>

  <!-- NEW: Material Properties (Roughness & Metalness) -->
  <div class="material-section">
    <label class="section-title">Material Properties</label>
    
    <div class="material-prop-row">
      <label class="material-prop-label">Roughness: <span id="roughness-value">0.5</span></label>
      <input type="range" id="roughness-slider" min="0" max="1" step="0.01" value="0.5" class="material-prop-range">
    </div>
    <div>
      <label class="material-prop-label">Metalness: <span id="metalness-value">0.0</span></label>
      <input type="range" id="metalness-slider" min="0" max="1" step="0.01" value="0.0" class="material-prop-range">
    </div>
  </div>

<div class="material-section">
  <button id="open-texture-painter" class="paint-btn">
    üé® Paint Texture
  </button>
</div>
</div>

<div id="clothes-panel" class="panel">
  <h4 class="panel-heading">Clothes</h4>

<button class="clothes-category" data-category="shirts">
  <img src="icons/clothing/shirt.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Shirts</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="jacket">
  <img src="icons/clothing/jacket.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Jackets</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="pants">
  <img src="icons/clothing/pants.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Pants</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="shoes">
  <img src="icons/clothing/shoes.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Shoes</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="gloves">
  <img src="icons/clothing/gloves.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Gloves</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="hair">
  <img src="icons/clothing/hair.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Hair</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="facialHair">
  <img src="icons/clothing/facial_hair.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Facial Hair</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="headwear">
  <img src="icons/clothing/headwear.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Headwear</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="glasses">
  <img src="icons/clothing/glasses.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Glasses</span>
  <span class="item-count">(0)</span>
</button>
<button class="clothes-category" data-category="accessories">
  <img src="icons/clothing/accessories.png" class="clothes-category-icon" onerror="this.style.display='none'" alt="">
  <span class="category-name">Accessories</span>
  <span class="item-count">(0)</span>
</button>

</div>
<div id="animations-panel" class="panel">
  <h4 class="panel-heading">Animations</h4>
  <div id="animations-list" class="animation-cards"></div>
</div>
<div id="randomizer-panel" class="panel">

  <h3 class="rand-title">Randomizer</h3>

  <div class="rand-options">
    <label class="rand-toggle">
      <input type="checkbox" data-rand="baseMesh" checked>
      <span>Base Mesh</span>
    </label>

    <label class="rand-toggle">
      <input type="checkbox" data-rand="clothes" checked>
      <span>Clothes</span>
    </label>

    <label class="rand-toggle">
      <input type="checkbox" data-rand="textures" checked>
      <span>Textures</span>
    </label>

    <label class="rand-toggle">
      <input type="checkbox" data-rand="colors" checked>
      <span>Colors</span>
    </label>

    <label class="rand-toggle">
      <input type="checkbox" data-rand="blendShapes" checked>
      <span>Blend Shapes</span>
    </label>

    <label class="rand-toggle">
      <input type="checkbox" data-rand="animation" checked>
      <span>Animation</span>
    </label>
  </div>

  <div class="rand-actions">
    <button id="randomize-btn">üé≤ Randomize</button>
    <button id="reset-btn" disabled>‚ôª Reset</button>
  </div>

</div>


<!-- RIGHT CLOTHING ITEMS PANEL -->
<div id="clothes-items-panel" class="panel panel-right">
  <h4 id="clothes-items-title">Select a category</h4>

  <!-- IMPORTANT: this is what JS writes into -->
  <div class="clothes-items-grid" id="clothes-items-grid"></div>
</div>
  <!-- ================= MAIN SCRIPT ================= -->
<div id="viewport"></div>
<!-- ================= TEXTURE PAINTER MODE ================= -->

<div id="texture-painter-mode" class="hidden">

  <!-- LEFT: 3D MODEL (20%) -->
  <div id="painter-viewport">
    <!-- we will reuse the SAME three.js renderer -->
  </div>

  <!-- RIGHT: PAINTER UI (80%) -->
  <div id="painter-ui">

    <!-- TOP BAR -->
    <div class="painter-top-bar">
      <button id="exit-painter">‚¨Ö Back</button>
      <span class="painter-title">Texture Painter</span>
    </div>

    <!-- MAIN CONTENT -->
    <div class="painter-content">

      <!-- TEXTURE VIEW -->
      <div class="painter-panel texture-view">
        <h4>Texture View</h4>
        <canvas id="texture-canvas"></canvas>
      </div>

      <!-- TOOLS -->
      <div class="painter-panel tools-panel">
        <h4>Tools</h4>

        <button class="tool-btn" data-tool="move">Move</button>
        <button class="tool-btn" data-tool="draw">Draw</button>
        <button class="tool-btn" data-tool="erase">Erase</button>
        <button class="tool-btn" data-tool="bucket">Bucket</button>
        <button class="tool-btn" id="reset-texture-btn" disabled>
          üîÑ Reset Texture
        </button>

        <div class="tool-subpanel">
          <label>Color</label>
          <input type="color" id="paint-color" value="#ffffff">

          <label>Brush Size</label>
          <input type="range" id="brush-size" min="1" max="50" value="10">

        </div>
  <!-- ‚úÖ UV CONTROLS (NEW, SIMPLE) -->
  <div class="tool-subpanel uv-panel">
    <label>UV Overlay</label>

    <div class="uv-controls">
      <button id="toggle-uv" class="icon-btn active" title="Toggle UV">
        üëÅÔ∏è
      </button>

      <input
        type="range"
        id="uv-opacity"
        min="0"
        max="100"
        value="25"
      />
    </div>
  </div>
      </div>

    </div>
  </div>
</div>

<!-- ================= PLANS & CREDITS OVERLAY ================= -->
<div id="plans-overlay" class="overlay hidden">

  <div class="overlay-backdrop"></div>

  <div class="overlay-panel">

    <!-- HEADER -->
    <div class="overlay-header">
      <h2>MemberShips & Credits</h2>
      <button id="close-plans" class="icon-btn">‚úï</button>
    </div>
<div class="plans-visual">
  <div class="visual-frame">
    <video
      class="character-preview"
      src="videos/customization.mp4"
      autoplay
      muted
      loop
      playsinline
    ></video>
    <div class="visual-overlay"></div>

  </div>
</div>


    <!-- TABS -->
    <div class="overlay-tabs">
      <button class="tab-btn active" data-tab="plans">MemberShip</button>
      <button class="tab-btn" data-tab="credits">Buy Credits</button>
    </div>

    <!-- CONTENT -->
    <div class="overlay-content">

      <!-- ================= SUBSCRIPTIONS ================= -->
      <div class="tab-content active" id="tab-plans">
<div class="billing-toggle">
  <span class="billing-label active" data-billing="monthly">Monthly</span>
  <div class="toggle-switch">
    <div class="toggle-knob"></div>
  </div>
  <span class="billing-label" data-billing="yearly">
    Yearly <em>-20%</em>
  </span>
</div>

        <div class="plans-grid">

          <!-- FREE -->
          <div class="plan-card free">
            <h3>FREE</h3>
            <p class="price">$0</p>

            <ul>
              <li>Full editor access</li>
              <li>Texture painting</li>
              <li>Preview all content</li>
              <li>1 Free export</li>
            </ul>

            <button class="plan-btn disabled">Current Plan</button>
          </div>

          <!-- PREMIUM -->
          <div class="plan-card premium highlight">
            <h3>PREMIUM</h3>
            <p class="price">
  <span class="price-monthly">$9.99 / month</span>
  <span class="price-yearly">$95.99 / year</span>
</p>


            <ul>
              <li>15 Credits / month</li>
              <li>Credits roll over (3 months)</li>
              <li>2048 textures</li>
              <li>No watermark</li>
              <li>All meshes & clothes</li>
            </ul>

            <button class="plan-btn">Subscribe</button>
          </div>

          <!-- STUDIO -->
          <div class="plan-card studio">
            <h3>STUDIO</h3>
            <p class="price"><span class="price-monthly">$29.99 / month</span>
<span class="price-yearly">$287.99 / year</span>
</p>

            <ul>
              <li>50 Credits / month</li>
              <li>‚úî FBX Export (GLB/GLTF/FBX)</li>
              <li>Credits roll over (6 months)</li>
              <li>4096 textures</li>
              <li>Batch exports</li>
              <li>Commercial license</li>
            </ul>

            <button class="plan-btn">Subscribe</button>
          </div>

        </div>
      </div>

      <!-- ================= CREDIT PACKS ================= -->
      <div class="tab-content" id="tab-credits">

        <div class="credits-grid">

          <div class="credit-pack">
            <h3>5 Credits</h3>
            <p class="price">$7.99</p>
            <button class="plan-btn">Buy</button>
          </div>

          <div class="credit-pack">
            <h3>10 Credits</h3>
            <p class="price">$14.99</p>
            <button class="plan-btn">Buy</button>
          </div>

          <div class="credit-pack">
            <h3>25 Credits</h3>
            <p class="price">$29.99</p>
            <button class="plan-btn">Buy</button>
          </div>

        </div>

      </div>

    </div>
  </div>
</div>


<div id="toast" class="toast hidden"></div>
<script type="module" src="./main.js"></script>


<!-- Randomizer Loading Overlay -->
<div id="randomizer-loading" class="overlay hidden">
  <div class="randomizer-loading-content">
    <div class="spinner spinner-wrap"></div>
    <h2>Creating Random Character...</h2>
    <p>Please wait</p>
  </div>
</div>

<!-- Export Panel Overlay -->
<div id="export-panel-overlay" class="overlay hidden">
  <div class="export-panel-content">
    
    <button id="export-panel-close" class="export-panel-close-btn">&times;</button>

    <h2 class="export-panel-title">Export Your Character</h2>

    <div class="export-preview-wrap">
      <div id="export-preview-container"></div>
    </div>

    <div class="export-section">
      <h3 class="export-section-title">What do you want to export?</h3>
      
      <div class="export-type-grid">
        <div class="export-type-card" onclick="window.selectExportType('full')">
          <div class="export-type-icon">üì¶</div>
          <h4 class="export-type-name">Full Character</h4>
          <p class="export-type-desc">Model + Textures + Animations</p>
          <p class="export-type-cost-paid">
            <span id="full-cost">1</span> Credit
          </p>
        </div>

        <div class="export-type-card" onclick="window.selectExportType('animation')">
          <div class="export-type-icon">üé¨</div>
          <h4 class="export-type-name">Animation Only</h4>
          <p class="export-type-desc">Skeleton + Animation data</p>
          <p class="export-type-cost-free">FREE</p>
        </div>
      </div>
    </div>

    <div class="export-section">
      <h3 class="export-section-title">Choose Format</h3>
      
      <div class="export-format-grid">
        <button class="format-btn" data-format="glb" onclick="window.selectFormat('glb', this)">>
          GLB <span class="format-label-sub">(Binary)</span>
        </button>
        <button class="format-btn" data-format="gltf" onclick="window.selectFormat('gltf', this)">>
          GLTF <span class="format-label-sub">(JSON)</span>
        </button>
        <button class="format-btn" data-format="fbx" onclick="window.selectFormat('fbx', this)">>
          FBX <span class="format-label-sub">(Unity/Unreal/Godot)</span>
        </button>
      
    <p class="export-format-note">Note: FBX export requires Premium or Studio plan</p></div>
    </div>

    <button id="final-export-btn" class="final-export-btn" disabled>
      Select options above
    </button>

  </div>
</div>

<!-- ================= SETTINGS OVERLAY ================= -->
<div id="settings-overlay">
  <div class="settings-panel">

    <div class="settings-header">
      <h2>‚öôÔ∏è Account Settings</h2>
      <button id="close-settings" class="icon-btn">‚úï</button>
    </div>

    <div class="settings-body">

      <!-- Account Info -->
      <div class="settings-section">
        <h3>Account Information</h3>
        <p><strong>Email:</strong> <span id="settings-email">-</span></p>
        <p><strong>Plan:</strong> <span id="settings-plan">-</span></p>
      </div>

      <!-- Subscription -->
      <div class="settings-section">
        <h3>üí≥ Subscription</h3>
        <p>Cancel your subscription. You'll keep access until the end of your billing period.</p>
        <button id="cancel-subscription-btn" class="settings-btn-danger">Cancel Subscription</button>
      </div>

      <!-- Delete Account -->
      <div class="settings-section">
        <h3>üóëÔ∏è Delete Account</h3>
        <p>Permanently disable your account. Your data will be retained for 30 days.</p>
        <button id="delete-account-btn" class="settings-btn-secondary">Delete Account</button>
      </div>

    </div>
  </div>
</div>

</body>
</html>